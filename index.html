import React, { useMemo, useState } from 'react';
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";

/************************************
 * Inline SVG Icons (no external CDN)
 ************************************/
const Svg = ({ children, className = "h-5 w-5", color = "currentColor", viewBox = "0 0 24 24", title }) => (
  <svg
    aria-hidden={title ? undefined : true}
    role={title ? "img" : "presentation"}
    viewBox={viewBox}
    className={className}
    fill="none"
    stroke={color}
    strokeWidth="2"
    strokeLinecap="round"
    strokeLinejoin="round"
  >
    {title ? <title>{title}</title> : null}
    {children}
  </svg>
);
const IconCheck = (props) => (
  <Svg {...props}>
    <path d="M20 6L9 17l-5-5" />
  </Svg>
);
const IconPhone = (props) => (
  <Svg {...props}>
    <path d="M22 16.92v2a2 2 0 0 1-2.18 2A19.8 19.8 0 0 1 3.1 4.18 2 2 0 0 1 5.11 2h2a2 2 0 0 1 2 1.72c.12.89.31 1.76.58 2.6a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.48-1.15a2 2 0 0 1 2.11-.45c.84.27 1.71.46 2.6.58A2 2 0 0 1 22 16.92z" />
  </Svg>
);
const IconMapPin = (props) => (
  <Svg {...props}>
    <path d="M21 10c0 7-9 12-9 12S3 17 3 10a9 9 0 1 1 18 0z" />
    <circle cx="12" cy="10" r="3" />
  </Svg>
);
const IconWheelchair = (props) => (
  <Svg {...props}>
    <circle cx="7" cy="17" r="3" />
    <path d="M14 7a2 2 0 1 0-4 0v5h4l3 6" />
    <path d="M6 14l2-2" />
    <path d="M13 12h4" />
  </Svg>
);
const IconCar = (props) => (
  <Svg {...props}>
    <path d="M3 13l2-5a2 2 0 0 1 2-1h10a2 2 0 0 1 2 1l2 5" />
    <path d="M5 13h14" />
    <circle cx="7.5" cy="16.5" r="1.5" />
    <circle cx="16.5" cy="16.5" r="1.5" />
  </Svg>
);
const IconUsers = (props) => (
  <Svg {...props}>
    <path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2" />
    <circle cx="9" cy="7" r="4" />
    <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
  </Svg>
);
const IconShieldCheck = (props) => (
  <Svg {...props}>
    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
    <path d="M9 12l2 2 4-4" />
  </Svg>
);
const IconArrowRight = (props) => (
  <Svg {...props}>
    <path d="M5 12h14" />
    <path d="M12 5l7 7-7 7" />
  </Svg>
);

/************************************
 * Brand palettes – PRIMARY matches uploaded logo
 ************************************/
const palettes = {
  Primary: {
    name: "Primary (Brand Logo)",
    bg: "#FFFFFF",
    // Teal from wordmark
    brand: "#00857A",
    // Navy from "Mobility" / tagline
    brandDark: "#003A5D",
    // Red from pin symbol
    accent: "#E53935",
    // Body text
    text: "#102A43",
    // Light section background
    subtle: "#F5F7FA",
    // Tagline / secondary text
    tagline: "#003A5D",
  },
  Calm: {
    name: "Healthcare Calm",
    bg: "#FFFFFF",
    brand: "#1ABC9C",
    brandDark: "#128E76",
    accent: "#E74C3C",
    text: "#1F2937",
    subtle: "#F3F4F6",
    tagline: "#2C3E50",
  },
  Trust: {
    name: "Modern Trust",
    bg: "#FFFFFF",
    brand: "#1A237E",
    brandDark: "#121A5F",
    accent: "#2ECC71",
    text: "#111827",
    subtle: "#F5F5F5",
    tagline: "#1F2937",
  },
};

/************************************
 * Lightweight self-checks ("tests")
 ************************************/
function useSmokeTests() {
  return useMemo(() => {
    const tests = [
      { name: "Palette: Primary exists", pass: !!palettes.Primary },
      {
        name: "Icon components exist",
        pass: [
          IconMapPin,
          IconWheelchair,
          IconPhone,
          IconCar,
          IconUsers,
          IconShieldCheck,
          IconArrowRight,
          IconCheck,
        ].every(Boolean),
      },
      { name: "Tel link format", pass: /^tel:\\d+/.test("tel:12064721001") },
      {
        name: "Color contrast tokens present",
        pass: !!palettes.Primary.text && !!palettes.Primary.bg,
      },
    ];
    return tests;
  }, []);
}

export default function CareLoopRedesign() {
  const [mode, setMode] = useState("Primary");
  const p = palettes[mode];
  const tests = useSmokeTests();

  return (
    <div style={{ background: p.bg, color: p.text }} className="min-h-screen font-sans">
      {/* Top Bar */}
      <header
        className="sticky top-0 z-40 border-b"
        style={{ borderColor: p.subtle, background: "rgba(255,255,255,0.96)" }}
      >
        <div className="max-w-6xl mx-auto flex items-center justify-between gap-3 px-4 py-3">
          {/* REAL logo lockup using uploaded asset */}
          <div className="flex items-center gap-3">
            <img
              src="/mnt/data/log.png"
              alt="CareLoop Mobility logo"
              className="h-10 w-auto"
            />
          </div>

          <nav className="hidden md:flex items-center gap-6 text-sm">
            <a className="hover:underline" href="#services">
              Services
            </a>
            <a className="hover:underline" href="#area">
              Service Area
            </a>
            <a className="hover:underline" href="#faq">
              FAQ
            </a>
            <a className="hover:underline" href="#contact">
              Contact
            </a>
          </nav>

          <div className="flex items-center gap-3">
            <select
              value={mode}
              onChange={(e) => setMode(e.target.value)}
              className="text-sm border rounded-md px-2 py-1"
              style={{ borderColor: p.subtle }}
            >
              <option value="Primary">Brand Colors</option>
              <option value="Calm">Healthcare Calm</option>
              <option value="Trust">Modern Trust</option>
            </select>
            <a href="tel:12064721001">
              <Button className="rounded-xl" style={{ background: p.accent }}>
                Call Now
              </Button>
            </a>
          </div>
        </div>
      </header>

      {/* Hero */}
      <section className="relative overflow-hidden">
        <div className="max-w-6xl mx-auto grid md:grid-cols-2 gap-10 px-4 py-14">
          <div>
            <h1
              className="text-3xl md:text-5xl font-bold leading-tight"
              style={{ color: p.brandDark }}
            >
              Safe, reliable rides to your medical appointments
            </h1>
            <p
              className="mt-4 text-base md:text-lg"
              style={{ color: p.tagline }}
            >
              Door-to-door ambulatory and wheelchair transportation across
              Snohomish & King County.
            </p>
            <div className="mt-6 flex flex-wrap gap-3">
              <a href="#book">
                <Button
                  className="rounded-xl px-5 py-6 text-base"
                  style={{ background: p.brand }}
                >
                  Request a Ride
                </Button>
              </a>
              <a href="tel:12064721001">
                <Button
                  className="rounded-xl px-5 py-6 text-base"
                  variant="outline"
                  style={{ borderColor: p.brand, color: p.brand }}
                >
                  <IconPhone className="h-4 w-4 mr-2" /> 206‑472‑1001
                </Button>
              </a>
            </div>
            <div className="mt-6 grid grid-cols-2 md:grid-cols-3 gap-3 text-sm">
              {[
                { icon: <IconShieldCheck className="h-4 w-4" />, label: "On‑time & insured" },
                { icon: <IconUsers className="h-4 w-4" />, label: "Caregiver rides free" },
                {
                  icon: <IconWheelchair className="h-4 w-4" />,
                  label: "Wheelchair & ambulatory",
                },
              ].map((f, i) => (
                <div
                  key={i}
                  className="flex items-center gap-2 px-3 py-2 rounded-lg"
                  style={{ background: p.subtle }}
                >
                  <div style={{ color: p.brand }}>{f.icon}</div>
                  <span>{f.label}</span>
                </div>
              ))}
            </div>
          </div>
          <div>
            <Card className="rounded-2xl shadow-lg">
              <CardContent className="p-6">
                <h3
                  className="text-xl font-semibold"
                  style={{ color: p.brandDark }}
                >
                  Quick Ride Request
                </h3>
                <p className="text-sm mt-1" style={{ color: p.tagline }}>
                  We’ll call to confirm your trip.
                </p>
                <form
                  className="mt-4 grid grid-cols-1 gap-3"
                  onSubmit={(e) => e.preventDefault()}
                >
                  <input
                    className="border rounded-lg px-3 py-2"
                    placeholder="Your Name"
                  />
                  <input
                    className="border rounded-lg px-3 py-2"
                    placeholder="Phone Number"
                  />
                  <input
                    className="border rounded-lg px-3 py-2"
                    placeholder="Pickup Address"
                  />
                  <input
                    className="border rounded-lg px-3 py-2"
                    placeholder="Destination"
                  />
                  <Button
                    className="rounded-xl mt-2"
                    style={{ background: p.brand }}
                  >
                    Submit Request
                  </Button>
                </form>
                <div className="mt-4 text-xs" style={{ color: p.tagline }}>
                  Or call
                  <a className="underline ml-1" href="tel:12064721001">
                    206‑472‑1001
                  </a>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>
      </section>

      {/* At a Glance */}
      {/* Story images / real riders */}
      <section className="py-12">
        <div className="max-w-6xl mx-auto px-4">
          <h2
            className="text-2xl md:text-3xl font-bold"
            style={{ color: p.brandDark }}
          >
            See CareLoop in action
          </h2>
          <p className="mt-2 text-sm md:text-base" style={{ color: p.tagline }}>
            Real moments from non-emergency medical rides: helping riders into the van, supporting them on the way, and
            arriving safely at clinics and community locations.
          </p>
          <div className="mt-6 grid gap-6 md:grid-cols-3">
            <Card className="rounded-2xl overflow-hidden shadow-sm">
              <img
                src="https://images.pexels.com/photos/7551670/pexels-photo-7551670.jpeg?auto=compress&cs=tinysrgb&w=800"
                alt="Driver assisting an older Black rider in a wheelchair into a medical transport van"
                className="h-48 w-full object-cover"
              />
              <CardContent className="p-4">
                <h3 className="font-semibold" style={{ color: p.brandDark }}>
                  Gentle, supported pickup
                </h3>
                <p className="mt-1 text-sm" style={{ color: p.tagline }}>
                  Drivers help riders and caregivers get safely from the front door into the vehicle.
                </p>
              </CardContent>
            </Card>

            <Card className="rounded-2xl overflow-hidden shadow-sm">
              <img
                src="https://images.pexels.com/photos/6129686/pexels-photo-6129686.jpeg?auto=compress&cs=tinysrgb&w=800"
                alt="Smiling rider of color seated in a wheelchair inside a clean transport van"
                className="h-48 w-full object-cover"
              />
              <CardContent className="p-4">
                <h3 className="font-semibold" style={{ color: p.brandDark }}>
                  Comfortable ride between visits
                </h3>
                <p className="mt-1 text-sm" style={{ color: p.tagline }}>
                  Clean, secure vehicles for riders using wheelchairs, walkers, or ambulatory support.
                </p>
              </CardContent>
            </Card>

            <Card className="rounded-2xl overflow-hidden shadow-sm">
              <img
                src="https://images.pexels.com/photos/7551673/pexels-photo-7551673.jpeg?auto=compress&cs=tinysrgb&w=800"
                alt="CareLoop driver helping a diverse rider step down from the van at a clinic entrance"
                className="h-48 w-full object-cover"
              />
              <CardContent className="p-4">
                <h3 className="font-semibold" style={{ color: p.brandDark }}>
                  Safe drop‑off at clinics
                </h3>
                <p className="mt-1 text-sm" style={{ color: p.tagline }}>
                  Door-to-door service to hospitals, clinics, dialysis centers, and therapy appointments.
                </p>
              </CardContent>
            </Card>
          </div>
        </div>
      </section>

      {/* At a Glance */}
      <section className="py-12" style={{ background: p.subtle }}>
        <div className="max-w-6xl mx-auto px-4">
          <h2
            className="text-2xl md:text-3xl font-bold"
            style={{ color: p.brandDark }}
          >
            At‑a‑Glance
          </h2>
          <div className="mt-6 grid md:grid-cols-3 gap-6">
            {[
              {
                title: "Service Area",
                text: "Snohomish & King County",
                icon: <IconMapPin className="h-5 w-5" />,
              },
              {
                title: "Mobility Types",
                text: "Ambulatory & Wheelchair (no stretcher)",
                icon: <IconWheelchair className="h-5 w-5" />,
              },
              {
                title: "Booking",
                text: "Call or request online",
                icon: <IconPhone className="h-5 w-5" />,
              },
            ].map((c, i) => (
              <Card key={i} className="rounded-2xl">
                <CardContent className="p-6">
                  <div
                    className="flex items-center gap-2"
                    style={{ color: p.brand }}
                  >
                    {c.icon}
                    <h3 className="font-semibold">{c.title}</h3>
                  </div>
                  <p className="mt-2 text-sm" style={{ color: p.tagline }}>
                    {c.text}
                  </p>
                </CardContent>
              </Card>
            ))}
          </div>
        </div>
      </section>

      {/* Services */}
      <section id="services" className="py-14">
        <div className="max-w-6xl mx-auto px-4">
          <h2
            className="text-2xl md:text-3xl font-bold"
            style={{ color: p.brandDark }}
          >
            What We Help You Get To
          </h2>
          <div className="mt-6 grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {[
              {
                t: "Appointments & Checkups",
                d: "Primary care, specialists, follow‑ups.",
              },
              {
                t: "Dialysis & Oncology",
                d: "Dialysis, chemo, radiation, infusion.",
              },
              { t: "Therapy & Rehab", d: "PT/OT, rehab centers, outpatient." },
              { t: "Hospitals & Clinics", d: "Door‑to‑door assistance." },
            ].map((s, i) => (
              <Card
                key={i}
                className="rounded-2xl hover:shadow-lg transition-shadow"
              >
                <CardContent className="p-6">
                  <div
                    className="flex items-center gap-2"
                    style={{ color: p.brand }}
                  >
                    <IconCar className="h-5 w-5" />
                    <h3 className="font-semibold">{s.t}</h3>
                  </div>
                  <p className="mt-2 text-sm" style={{ color: p.tagline }}>
                    {s.d}
                  </p>
                  <Button
                    variant="ghost"
                    className="mt-2 px-0 text-sm"
                    style={{ color: p.brand }}
                  >
                    Learn more <IconArrowRight className="h-4 w-4 ml-1" />
                  </Button>
                </CardContent>
              </Card>
            ))}
          </div>
        </div>
      </section>

      {/* Social proof / compliance */}
      <section className="py-12" style={{ background: p.subtle }}>
        <div className="max-w-6xl mx-auto px-4 grid md:grid-cols-3 gap-6 items-stretch">
          <Card className="rounded-2xl">
            <CardContent className="p-6">
              <h3
                className="font-semibold"
                style={{ color: p.brandDark }}
              >
                Why choose us
              </h3>
              <ul
                className="mt-3 space-y-2 text-sm"
                style={{ color: p.tagline }}
              >
                <li className="flex gap-2">
                  <IconCheck
                    style={{ color: p.brand }}
                    className="h-4 w-4 mt-0.5"
                  />
                  On‑time, courteous drivers
                </li>
                <li className="flex gap-2">
                  <IconCheck
                    style={{ color: p.brand }}
                    className="h-4 w-4 mt-0.5"
                  />
                  Wheelchair securement training
                </li>
                <li className="flex gap-2">
                  <IconCheck
                    style={{ color: p.brand }}
                    className="h-4 w-4 mt-0.5"
                  />
                  Caregiver rides free
                </li>
              </ul>
            </CardContent>
          </Card>
          <Card className="rounded-2xl">
            <CardContent className="p-6">
              <h3
                className="font-semibold"
                style={{ color: p.brandDark }}
              >
                Insurance & Payment
              </h3>
              <p className="mt-2 text-sm" style={{ color: p.tagline }}>
                Private pay; ask us about partners & coverage options.
              </p>
            </CardContent>
          </Card>
          <Card className="rounded-2xl">
            <CardContent className="p-6">
              <h3
                className="font-semibold"
                style={{ color: p.brandDark }}
              >
                Safety & Compliance
              </h3>
              <p className="mt-2 text-sm" style={{ color: p.tagline }}>
                Background‑checked drivers, regular vehicle inspections,
                securement protocols.
              </p>
            </CardContent>
          </Card>
        </div>
      </section>

      {/* CTA */}
      <section id="book" className="py-14">
        <div className="max-w-6xl mx-auto px-4 text-center">
          <h2
            className="text-2xl md:text-3xl font-bold"
            style={{ color: p.brandDark }}
          >
            Ready to ride?
          </h2>
          <p className="mt-2" style={{ color: p.tagline }}>
            Call now or request a ride online—we’ll confirm details by phone.
          </p>
          <div className="mt-4 flex items-center justify-center gap-3">
            <a href="tel:12064721001">
              <Button
                className="rounded-xl px-6 py-6 text-base"
                style={{ background: p.accent }}
              >
                <IconPhone className="h-4 w-4 mr-2" /> 206‑472‑1001
              </Button>
            </a>
            <a href="#">
              <Button
                className="rounded-xl px-6 py-6 text-base"
                style={{ background: p.brand }}
              >
                Open Ride Request Form
              </Button>
            </a>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-10" style={{ background: p.subtle }}>
        <div
          className="max-w-6xl mx-auto px-4 grid md:grid-cols-3 gap-6 text-sm"
          style={{ color: p.tagline }}
        >
          <div>
            <div className="font-semibold" style={{ color: p.brandDark }}>
              CareLoop Mobility
            </div>
            <p className="mt-1">
              Non‑Emergency Medical Transportation • Snohomish & King County
            </p>
          </div>
          <div>
            <div className="font-semibold mb-1" style={{ color: p.brandDark }}>
              Contact
            </div>
            <div>
              Phone:
              <a className="underline ml-1" href="tel:12064721001">
                206‑472‑1001
              </a>
            </div>
          </div>
          <div>
            <div className="font-semibold mb-1" style={{ color: p.brandDark }}>
              Quick Links
            </div>
            <div className="flex flex-col gap-1">
              <a className="hover:underline" href="#services">
                Services
              </a>
              <a className="hover:underline" href="#area">
                Service Area
              </a>
              <a className="hover:underline" href="#faq">
                FAQ
              </a>
              <a className="hover:underline" href="#contact">
                Contact
              </a>
            </div>
          </div>
        </div>
      </footer>

      {/* Inline Test Panel */}
      <section className="py-6">
        <div className="max-w-6xl mx-auto px-4">
          <details>
            <summary className="text-sm" style={{ color: p.tagline }}>
              Diagnostics / Smoke Tests
            </summary>
            <ul className="mt-2 text-sm">
              {tests.map((t, i) => (
                <li key={i} className="flex items-center gap-2">
                  <span>{t.pass ? "✅" : "❌"}</span>
                  <span>{t.name}</span>
                </li>
              ))}
            </ul>
          </details>
        </div>
      </section>
    </div>
  );
}
